var bank360Data=[];var selectText="&laquo; Válasszon &raquo;";var product,savingTerm,monthlySavings,accountCreationFee,contractAmount;function storeBank360Data(d){bank360Data=[];if(d.eredmeny==="sikeres"){jq.each(d.adat,function(f,e){if(typeof(bank360Data[e.termek])==="undefined"){bank360Data[e.termek]=[];bank360Data[e.termek]["megtakaritasi_ido_ev"]=e.megtakaritasi_ido;bank360Data[e.termek]["megtakaritasi_ido_ho"]=e.megtakaritasi_ido_honapban;bank360Data[e.termek]["szamlanyitasi_dij"]=[];bank360Data[e.termek]["havi_megtakaritas"]=[]}if(typeof(bank360Data[e.termek]["szamlanyitasi_dij"][e.szamlanyitasi_dij])==="undefined"){bank360Data[e.termek]["szamlanyitasi_dij"][e.szamlanyitasi_dij]=[];bank360Data[e.termek]["havi_megtakaritas"][e.havi_megtakaritas]=[]}bank360Data[e.termek]["szamlanyitasi_dij"][e.szamlanyitasi_dij]["szerzodeses_osszeg"]=e.szerzodeses_osszeg;bank360Data[e.termek]["havi_megtakaritas"][e.havi_megtakaritas]["szerzodeses_osszeg"]=e.szerzodeses_osszeg;bank360Data[e.termek]["szamlanyitasi_dij"][e.szamlanyitasi_dij]["havi_megtakaritas"]=e.havi_megtakaritas;bank360Data[e.termek]["havi_megtakaritas"][e.havi_megtakaritas]["szamlanyitasi_dij"]=e.szamlanyitasi_dij});var c=(jq('input[name="partner_updater"]').val()==="1");var b;if(!c){b='<option value="">'+selectText+"</option>"}for(var a in bank360Data){if((c&&(jq('input[name="temp_termekcsalad"]').val()==a))||!c){b+='<option value="'+a+'">'+a+"</option>"}}jq('select[name="termekcsalad"]').html(b).val(jq('input[name="temp_termekcsalad"]').val())}}jq(function(c){var e="https://bank360.hu/api/ltp/mind";var f=false;var a=function(g){g=purifyLetters(g,{search:" ",replace:"_"});var h="?bank_"+g+"=true";if(!f){f=true;c.ajax({url:e+h,dataType:"jsonp",jsonpCallback:"storeBank360Data",complete:function(){f=false},error:function(i){console.log(i)}})}};c('input[name="szerzodeskotes_datuma"]').datepicker("option","maxDate",0);c('input[name="szuletesi_ido"]').datepicker("option","maxDate","-14y");var d=c('select[name="bank_id"]');if((typeof(d.val())!=="undefined")&&d.val()!==""){a(d.find("option:selected").text())}var b;b=c('input[name="temp_futamido_ev"]').val();if(typeof b!=="undefined"){if(b!==""){c('select[name="futamido_ev"]').html('<option value="'+b+'">'+b+" év</option>")}b=c('input[name="temp_havi_befizetes"]').val();if(b!==""){c('select[name="havi_befizetes"]').html('<option value="'+b+'">'+thousandsSeparator(b)+"</option>")}b=c('input[name="temp_szamlanyitasi_dij"]').val();if(b!==""){c('select[name="szamlanyitasi_dij"]').html('<option value="'+b+'">'+thousandsSeparator(b)+"</option>")}b=c('input[name="temp_ltp_szerzodes_osszege"]').val();if(b!==""){c('select[name="ltp_szerzodes_osszege"]').html('<option value="'+b+'">'+thousandsSeparator(b)+"</option>")}}c(document).on("change",'select[name="bank_id"]',function(){if(c(this).val()!==""){a(c(this).find("option:selected").text())}});c(document).on("change",'select[name="termekcsalad"]',function(){product=c(this).val();var j="";if(product!==""){j+='<option value="'+bank360Data[product]["megtakaritasi_ido_ev"]+'">'+bank360Data[product]["megtakaritasi_ido_ev"]+" év</option>"}jq('select[name="futamido_ev"]').html(j);var k='<option value="">'+selectText+"</option>";for(var g in bank360Data[product]["szamlanyitasi_dij"]){k+='<option value="'+g+'">'+thousandsSeparator(g)+"</option>"}jq('select[name="szamlanyitasi_dij"]').html(k);var h='<option value="">'+selectText+"</option>";for(var g in bank360Data[product]["havi_megtakaritas"]){h+='<option value="'+g+'">'+thousandsSeparator(g)+"</option>"}jq('select[name="havi_befizetes"]').html(h)});c(document).on("change",'select[name="havi_befizetes"]',function(){monthlySavings=c(this).val();var g="";if(monthlySavings!==""){g+='<option value="'+bank360Data[product]["havi_megtakaritas"][monthlySavings]["szerzodeses_osszeg"]+'">'+thousandsSeparator(bank360Data[product]["havi_megtakaritas"][monthlySavings]["szerzodeses_osszeg"])+"</option>"}jq('select[name="ltp_szerzodes_osszege"]').html(g);jq('select[name="szamlanyitasi_dij"]').val(bank360Data[product]["havi_megtakaritas"][monthlySavings]["szamlanyitasi_dij"])});c(document).on("change",'select[name="szamlanyitasi_dij"]',function(){accountCreationFee=c(this).val();var g="";if(accountCreationFee!==""){g+='<option value="'+bank360Data[product]["szamlanyitasi_dij"][accountCreationFee]["szerzodeses_osszeg"]+'">'+thousandsSeparator(bank360Data[product]["szamlanyitasi_dij"][accountCreationFee]["szerzodeses_osszeg"])+"</option>"}jq('select[name="ltp_szerzodes_osszege"]').html(g);jq('select[name="havi_befizetes"]').val(bank360Data[product]["szamlanyitasi_dij"][accountCreationFee]["havi_megtakaritas"])});if(!c('input[name="van_kedvezmenyezett"]').prop("checked")){c("#sub_beneficiary_data").hide()}c('input[name="van_kedvezmenyezett"]').click(function(){c("#sub_beneficiary_data").slideToggle()});c('input[name="iranyitoszam"]').keyup(function(){SetSettlementByPostCode(c(this).val(),c('input[name="varos"]'))});c('input[name="beneficiary_iranyitoszam"]').keyup(function(){SetSettlementByPostCode(c(this).val(),c('input[name="beneficiary_varos"]'))});c("form").submit(function(){if((Object.keys(bank360Data).length>0)&&(c('select[name="termekcsalad"]').val()!="")){c('input[name="futamido_ho"]').val(bank360Data[c('select[name="termekcsalad"]').val()]["megtakaritasi_ido_ho"])}c('input[name="telefonszam"]').val("+36"+c('select[name="area_code"]').val()+c('input[name="phone_no"]').val());c('input[name="beneficiary_telefonszam"]').val("+36"+c('select[name="beneficiary_area_code"]').val()+c('input[name="beneficiary_phone_no"]').val())})});